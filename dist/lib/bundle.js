!function(t){var s={};function i(e){if(s[e])return s[e].exports;var h=s[e]={i:e,l:!1,exports:{}};return t[e].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=s,i.d=function(t,s,e){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)i.d(e,h,function(s){return t[s]}.bind(null,h));return e},i.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="",i(i.s=0)}([function(t,s,i){"use strict";i.r(s);var e=class{constructor(t,s,i,e,h,a){this.ctx=t,this.rotation=s,this.x=i,this.y=e,this.speed=5,this.draw=this.draw.bind(this),this.radius=2,this.score=h,this.image=new Image,this.imgw=21,this.imgh=21,this.itemupdate=a}draw(){if(this.itemupdate){switch(this.rotation){case 0:this.image.src="./asset/bul_top.png";break;case-90:this.image.src="./asset/bul_left.png";break;case 90:this.image.src="./asset/bul_right.png";break;case 180:this.image.src="./asset/bul_bot.png"}this.ctx.drawImage(this.image,0,0,255,255,this.x-10,this.y-10,this.imgw,this.imgh),this.updatedir()}else this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,2*Math.PI),this.ctx.fill(),this.ctx.fillStyle="green",this.updatedir()}destroyBul(){this.radius=0,this.speed=0,this.x=0,this.y=0,this.imgw=0,this.imgh=0}updatedir(){switch(this.rotation){case 0:this.y-=this.speed;break;case-90:this.x-=this.speed;break;case 90:this.x+=this.speed;break;case 180:this.y+=this.speed}}};var h=class{constructor(t){this.sound=document.createElement("audio"),this.sound.src=t,this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none"}play(){this.sound.play()}stop(){this.sound.pause()}};var a=class{constructor(t,s,i,e){this.ctx=t,this.canvasWidth=500,this.canvasHeight=500,this.w=84,this.h=84,this.x=(this.canvasWidth-this.w/2)/2,this.y=this.canvasHeight-this.h/2,this.dx=1,this.dy=1,this.positionX=1,this.posE=1,this.posY=164,this.positionY=0,this.speed=10,this.rotation=0,this.tankImg=s,this.bullet=[],this.score=i,this.playerLife=e,this.dyingTime=0,this.transform=new Image,this.itemupdate=!1,this.time=1,this.userAction=this.userAction.bind(this)}drawTank(){this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.rotation*Math.PI/180),this.ctx.drawImage(this.tankImg,this.positionX*this.w,this.positionY,this.w,this.h,-this.w/4,-this.h/4,this.w/2,this.h/2),this.ctx.restore(),this.bullet.length>0&&this.bullet.forEach(t=>{t.score=this.score,t.draw()})}shoot(){this.bullet.push(new e(this.ctx,this.rotation,this.x,this.y,this.score,this.itemupdate))}deletePlayer(){this.posY=164,this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.rotate(this.rotation*Math.PI/180),this.ctx.drawImage(this.tankImg,this.posE*this.w,this.posY,this.w,this.h,-this.w/4,-this.h/4,this.w/2,this.h/2),this.ctx.restore();for(var t=0;t<2;t++)this.posE++;this.posE>=3&&(this.w=0,this.h=0,this.posE=1)}userAction(){document.addEventListener("keydown",t=>{this.speed+=2,this.positionX>=7&&(this.positionX=1),37===t.keyCode?(this.positionX++,this.rotation=-90,this.x-=this.speed,this.x-this.w/4<0&&(this.x=this.w/4)):39===t.keyCode?(this.positionX++,this.rotation=90,this.x+=this.speed,this.x>this.canvasWidth-this.w/4&&(this.x=this.canvasWidth-this.w/4)):38===t.keyCode?(this.positionX++,this.rotation=0,this.y-=this.speed,this.y-this.h/4<0&&(this.y=this.h/4)):40===t.keyCode&&(this.positionX++,this.rotation=180,this.y+=this.speed,this.y>this.canvasHeight-this.h/4&&(this.y=this.canvasHeight-this.h/4))}),document.addEventListener("keyup",t=>{32===t.keyCode&&this.shoot(),37===t.keyCode?this.speed=0:39===t.keyCode?this.speed=0:38===t.keyCode?this.speed=0:40===t.keyCode&&(this.speed=0)})}};var r=class extends a{constructor(t,s){super(),this.positionY=84,this.positionX=1,this.x=Math.floor(400*Math.random()+100),this.y=Math.floor(300*Math.random())+35,this.ballx=this.x,this.bally=this.y,this.dy=5,this.speed=.5,this.ballSpeed=10,this.rotation=180,this.ctx=t,this.radius=2,this.tankImg=s,this.drawTank=this.drawTank.call(this),this.timer=0,this.newbullet=!1}drawEnemy(t,s){super.drawTank(),this.timer++,5===this.timer&&(this.positionX++,this.timer=0),this.positionX>7&&(this.positionX=1),this.updatedir(t,s)}updatedir(t,s){0===this.w&&0===this.h&&(this.x=-42,this.y=-42),s<this.y?(this.rotation=0,this.y-=this.speed):t<this.x&&(this.rotation=-90,this.x-=this.speed),t>this.x?(this.rotation=90,this.x+=this.speed):s>this.y&&(this.rotation=180,this.y+=this.speed),this.y===s&&(t<this.x?this.rotation=-90:this.rotation=90),this.x===t&&(s<this.y?this.rotation=0:this.rotation=180)}destroyEnemy(){super.deletePlayer()}};var o=class{constructor(t,s){this.ctx=t,this.image=new Image,this.w=84,this.h=84,this.positionX=1,this.positionY=3*this.w,this.sound=new h("./asset/explosion.mp3"),this.border=[[1,3,3,3,3,3,3,3,3,3,3,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,3,3,3,3,3,3,3,3,3,3,1]],this.currentStage=1,this.image.src="./asset/tank-sprite.png",this.player=s,this.borderLife=3;const i=new Image;i.src="./asset/tank.jpg",i.onload=(()=>{this.ctx.font="40px Arial Black",this.ctx.fillStyle="#2C4813",this.ctx.fillText("Tank Shooter",50,90),this.ctx.fillStyle="#AC2813",this.ctx.font="16px Arial Black",this.ctx.fillText("Press S to start a game",100,250),this.ctx.fillText("Acheive 100 Score to upgrade your bullet",100,300),this.ctx.fillText("Enjoy!",100,350)})}setup(){this.border.forEach((t,s)=>{t.forEach((t,i)=>{(0===t||7===t)&&s>=3&&s<=7&&i>=3&&i<=7&&(this.border[s][i]=Math.random()<.5?0:7)})})}draw(){this.border.forEach((t,s)=>{t.forEach((t,i)=>{this.player.bullet.forEach(e=>{let h=[e.x,e.y],a=[s*this.w/2,i*this.h/2];this.player.x<a[0]&&(a[0]+=42),this.player.y<a[1]&&(a[1]+=42),Math.abs(h[0]-a[0])<42&&Math.abs(h[1]-a[1])<42&&(a[0],7===t&&(e.destroyBul(),this.borderLife--,0===this.borderLife&&(this.sound.play(),this.border[s][i]=0,this.borderLife=3)))}),1===t?this.ctx.drawImage(this.image,t*this.w,this.positionY,this.w,this.h,s*this.w/2,i*this.h/2,this.w/2,this.h/2):3===t?this.ctx.drawImage(this.image,t*this.w,this.positionY,this.w,this.h,s*this.w/2,i*this.h/2,this.w/2,this.h/2):7===t?this.ctx.drawImage(this.image,t*this.w,this.positionY,this.w,this.h,s*this.w/2,i*this.h/2,this.w/2,this.h/2):this.ctx.drawImage(this.image,0,0,this.w,this.h,s*this.w/2,i*this.h/2,this.w/2,this.h/2)})})}};var n=class{constructor(t,s){this.ctx=t,this.image=new Image,this.image.src=s,this.x=300*Math.random()+42,this.y=300*Math.random()+42,this.w=21,this.h=21}draw(){this.ctx.drawImage(this.image,0,0,255,255,this.x,this.y,this.w,this.h)}drop(t,s){this.ctx.drawImage(this.image,0,0,255,255,t,s,this.w,this.h)}consumed(){this.w=0,this.h=0}};var c=class{constructor(t){this.ctx=t,this.score=0,this.tankImg=new Image,this.tankImg.src="./asset/tank-sprite.png",this.player=new a(t,this.tankImg,this.score,this.playerLife),this.enemies=[],this.draw=this.draw.bind(this),this.stage=1,this.life=100,this.wid=42,this.hei=42,this.status=!0,this.gg=!1,this.enemyLife=3,this.playerLife=100,this.background=new o(t,this.player),this.wait=0,this.item=new n(t,"./asset/bul_top.png"),this.itemupdate=!1,this.sound=new h("./asset/Cannon+1.mp3")}drawEnemy(){for(var t=0;t<this.stage;t++)this.enemies.push(new r(this.ctx,this.tankImg))}setup(){this.drawEnemy(),this.player.x=250,this.player.y=450,this.background.setup()}draw(){this.status&&!this.gg&&(this.ctx.clearRect(0,0,500,500),this.background.draw(),this.player.drawTank(),this.itemConsumed(),this.enemycol(),this.bgconstraint(this.player),this.ggman(),this.gameover(),requestAnimationFrame(this.draw))}enemycol(){this.enemies.forEach(t=>{t.drawEnemy(this.player.x,this.player.y);let s=[this.player.x,this.player.y],i=[t.x,t.y];this.bgconstraint(t),this.tankTotank(s,i),this.player.bullet.forEach(s=>{let e=[s.x,s.y];this.bulTotank(e,i,t,s)})})}bgconstraint(t){this.background.border.forEach((s,i)=>{s.forEach((s,e)=>{let h=i*this.wid,a=i*this.wid+this.wid,r=e*this.hei,o=e*this.hei+this.hei;this.wid,this.hei,0!==s&&(Math.abs(t.y-r)<21&&Math.abs(t.x-h)<21?(t.y<r&&(t.y=r-21),t.x<h&&(t.x=h-21)):Math.abs(t.y-o)<21&&Math.abs(t.x-a)<21&&(t.y>o&&(t.y=o+21),t.x>a&&(t.x=a+21)))})})}ggman(){this.enemies.length>0&&0===this.enemies.filter(t=>""!==t).length&&(this.ctx.font="30px Acme",this.ctx.fillStyle="#00dc00",this.ctx.fillText(`Score ${Math.floor(this.score)}`,40,40),this.ctx.fillText(`Player Life ${Math.floor(this.playerLife/10)}`,300,40),this.wait++,80===this.wait&&(this.status=!1,this.ctx.clearRect(0,0,500,500),this.ctx.beginPath(),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,500,500),this.ctx.font="30px Acme",this.ctx.closePath(),this.ctx.fillStyle="#00dc00",this.ctx.fillText(`Stage ${this.stage} cleared`,150,150),this.ctx.fillText(`Press [Enter] to Begin Stage ${this.stage+1}`,70,250),this.stage=this.stage+1,this.wait=0))}gameover(){if(0===this.player.w&&0===this.player.h){this.gg=!0,delete this.player,this.ctx.clearRect(0,0,500,500);const t=new Image;t.src="./asset/game_over.png",t.onload=(()=>{this.ctx.drawImage(t,0,0,500,500),this.ctx.font="40px Lobster",this.ctx.fillStyle="#a6fbf8",this.ctx.fillText(`Your Score is ${Math.floor(this.score)}`,120,160)})}}tankTotank(t,s){this.ctx.font="30px Acme",this.ctx.fillStyle="#00dc00",this.ctx.fillText(`Score ${Math.floor(this.score)}`,40,40),this.ctx.fillText(`Player Life ${Math.floor(this.playerLife/10)}`,300,40),Math.abs(t[0]-s[0])<42&&Math.abs(t[1]-s[1])<42&&(this.playerLife-=1,this.player.playerLife=this.playerLife,0===this.playerLife&&this.player.deletePlayer())}itemConsumed(){this.stage>=4&&(this.item.draw(),Math.abs(this.player.x-this.item.x)<21&&Math.abs(this.player.y-this.item.y)<21&&(this.player.itemupdate=!0,this.itemupdate=!0,this.item.consumed()))}bulTotank(t,s,i,e){Math.abs(t[0]-s[0])<42&&Math.abs(t[1]-s[1])<42&&(this.itemupdate?this.enemyLife-=1.5:this.enemyLife-=1,e.destroyBul(),0===this.enemyLife&&(this.sound.play(),this.score+=10,this.player.score=this.score,i.destroyEnemy(),delete this.enemies[this.enemies.indexOf(i)],this.enemyLife=3))}animate(){this.player.userAction(),document.addEventListener("keydown",t=>{13===t.keyCode&&(this.status=!0,this.setup(),this.draw())})}};var d=class{constructor(t){this.ctx=t,this.game=new c(t),this.startg=!1,this.pause=!1,this.cleared=!1,this.description=document.getElementById("intro"),this.start=this.start.bind(this)}start(){this.pause||(this.game.setup(),this.game.draw(),this.game.animate())}intro(){this.description,document.addEventListener("keydown",t=>{83===t.keyCode&&!1===this.startg&&(this.start(),this.startg=!0)})}};var l=class{constructor(t){this.bgm=document.getElementById("myAudio"),this.bgsound=document.getElementById("music-button"),this.icon=document.getElementById("icon")}musicAction(){this.bgsound.addEventListener("click",()=>{this.bgm.paused?(this.bgm.play(),this.icon.className="fas fa-volume-up"):(this.bgm.pause(),this.icon.className="fas fa-volume-off")})}};document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("MyCanvas");t.width=500,t.height=500;const s=t.getContext("2d"),i=new l;new d(s).intro(),i.musicAction()}),window.onload=function(){document.getElementById("myAudio").play()}}]);
//# sourceMappingURL=bundle.js.map